<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="index.css?v=2">
</head>
<body>
    <div class="container">
        <!-- ì™¼ìª½ ì˜ì—­ -->
        <div class="left">
            <div class="OnOff">
                <h1>SON</h1>
                <button id="switch">
                    <img id="switch-img" src="off.png" alt="ìŠ¤ìœ„ì¹˜">
                </button>
            </div>    
            <div class="button-group">
                <button id="button1">Liverpool</button>
                <button id="button2">Bitflow</button>
                <button id="button3">Notion</button>
                <button id="button4">Naver-Blog</button>
            </div>
        </div>
    
        <!-- ì¤‘ì•™ ì˜ì—­ -->
        <div class="center">
            <h2>Daily List</h2>
            <input type="text" id="taskInput" placeholder="What are you going to do?">
            <button id="addButton">Add</button>
            <ul id="taskList"></ul>
        </div>
    
        <!-- ì˜¤ë¥¸ìª½ ì˜ì—­ -->
        <div class="right">
            <div class="calendar">
                <div class="calendar-header">
                    <button id="prevBtn">&lt;</button>
                    <span id="calendarTitle"></span>
                    <button id="nextBtn">&gt;</button>
                </div>
                <div class="week">
                    <div>ì›”</div>
                    <div>í™”</div>
                    <div>ìˆ˜</div>
                    <div>ëª©</div>
                    <div>ê¸ˆ</div>
                    <div>í† </div>
                    <div>ì¼</div>
                </div>
                <div class="days"></div>
                <div class="display-selected">
                    <p class="selected"></p>
                </div>
            </div>
        </div>
        
    </div>    

    <script>
        // âœ… ë°¤ë‚® ì¡°ì ˆ ë²„íŠ¼ ê¸°ëŠ¥
        const switchButton = document.getElementById('switch');
        const switchImg = document.getElementById('switch-img');
        const body = document.body;

        window.onload = () => {
            body.style.backgroundImage = "url('Day.png')";
            const today = new Date();
            const todayString = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, "0")}-${String(today.getDate()).padStart(2, "0")}`;
        };


        switchButton.addEventListener('click', () => {
            const isNight = switchImg.getAttribute('src') === 'off.png';//off ì´ë¯¸ì§€ê°€ ëˆŒë¦¬ë©´
            body.style.backgroundImage = isNight ? "url('Night.png')" : "url('Day.png')";//ë°¤ì´ë¼ë©´ night, ì•„ë‹ˆë¼ë©´ day
            switchImg.setAttribute('src', isNight ? 'on.png' : 'off.png');//ë°¤ì´ë¼ë©´ on.png, ì•„ë‹ˆë¼ë©´, off.png
        });

        // âœ… í˜ì´ì§€ ì´ë™ ë²„íŠ¼ ê¸°ëŠ¥
        const pageLinks = {
            button1: 'https://sonny0126.github.io/Web/',
            button2: 'https://sonny0126.github.io/BitFlow/',
            button3: 'https://www.notion.so/Son-e53d58b3025f42d68700120ed5c20715',
            button4: 'https://blog.naver.com/chewypig'
        };

        Object.keys(pageLinks).forEach(id => {
            document.getElementById(id).addEventListener('click', () => {
                window.location.href = pageLinks[id]; // ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ë§í¬ë¡œ ì´ë™
            });
        });


        // ë‹¬ë ¥ ìƒì„± ë¶€ë¶„
        // âœ… ë‹¬ë ¥ ìš”ì†Œ ì˜¬ë°”ë¥´ê²Œ ì„ íƒ
        const calendarTitle = document.getElementById('calendarTitle');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const days = document.querySelector('.days');
        const selected = document.querySelector('.selected');

        // âœ… ë‚ ì§œ ì„¤ì •
        let dateToday = new Date();
        let year = dateToday.getFullYear();
        let month = dateToday.getMonth();

        // ğŸ“Œ ë‹¬ë ¥ ì¶œë ¥ í•¨ìˆ˜
        function displayCalendar() {
            const firstDay = new Date(year, month, 1); // ì²«ë‚ 
            const firstDayIdx = firstDay.getDay(); // ìš”ì¼ (ì¼=0, ì›”=1)
            const lastDay = new Date(year, month + 1, 0); // ë§ˆì§€ë§‰ ë‚ 
            const numberOfDays = lastDay.getDate(); // ë§ˆì§€ë§‰ ë‚ ì§œ

            // âœ… ë‹¬ë ¥ ì œëª© ê°±ì‹ 
            let formattedDate = dateToday.toLocaleString('en-US', {
                year: "numeric",
                month: "long",
                timeZone: 'Asia/Seoul'
            });
            calendarTitle.innerText = formattedDate;

            days.innerHTML = ''; // ê¸°ì¡´ ë‚ ì§œ ì´ˆê¸°í™”

            // ë¹ˆ ì¹¸ ì±„ìš°ê¸°
            for (let x = 0; x < firstDayIdx; x++) {
                let div = document.createElement('div');
                div.classList.add('empty');
                days.appendChild(div);
            }

            // ë‚ ì§œ ì±„ìš°ê¸°
            for (let x = 1; x <= numberOfDays; x++) {
                let div = document.createElement('div');
                let currentDate = new Date(year, month, x);
                div.dataset.date = currentDate.toDateString();
                div.innerText = x;
                div.classList.add('day');

                // ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡°
                if (
                    currentDate.getFullYear() === new Date().getFullYear() &&
                    currentDate.getMonth() === new Date().getMonth() &&
                    currentDate.getDate() === new Date().getDate()
                ) {
                    div.classList.add('current-date');
                }

                days.appendChild(div);
            }

            displaySelected();
        }

        // ğŸ“Œ ë‚ ì§œ ì„ íƒ ì‹œ í‘œì‹œ
        function displaySelected() {
            const dayElements = document.querySelectorAll('.days .day');
            dayElements.forEach(day => {
                day.addEventListener('click', (e) => {
                    const selectedDate = e.target.dataset.date;
                    selected.innerText = `Date: ${selectedDate}`;
                });
            });
        }

        // ğŸ“Œ ì´ì „ ë‹¬ ë³´ê¸°
        prevBtn.addEventListener('click', () => {
            if (month === 0) {
                month = 11;
                year -= 1;
            } else {
                month -= 1;
            }
            displayCalendar();
        });

        // ğŸ“Œ ë‹¤ìŒ ë‹¬ ë³´ê¸°
        nextBtn.addEventListener('click', () => {
            if (month === 11) {
                month = 0;
                year += 1;
            } else {
                month += 1;
            }
            displayCalendar();
        });

        // âœ… ì²˜ìŒ ì‹¤í–‰ ì‹œ ë‹¬ë ¥ í‘œì‹œ
        displayCalendar();


    </script>
</body>
</html>
