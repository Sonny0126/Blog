<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="index.css?v=2">
</head>
<body>
    <div class="container">
        <!-- 왼쪽 영역 -->
        <div class="left">
            <div class="OnOff">
                <h1>SON</h1>
                <button id="switch">
                    <img id="switch-img" src="off.png" alt="스위치">
                </button>
            </div>    
            <div class="button-group">
                <button id="button1">Liverpool</button>
                <button id="button2">Bitflow</button>
                <button id="button3">Notion</button>
                <button id="button4">Naver-Blog</button>
            </div>
        </div>
    
        <!-- 중앙 영역 -->
        <div class="center">
            <h2>Daily List</h2>
            <input type="text" id="taskInput" placeholder="What are you going to do?">
            <button id="addButton">Add</button>
            <ul id="taskList"></ul>
        </div>
    
        <!-- 오른쪽 영역 -->
        <div class="right">
            <div class="calendar">
                <div class="calendar-header">
                    <button id="prevBtn">&lt;</button>
                    <span id="calendarTitle"></span>
                    <button id="nextBtn">&gt;</button>
                </div>
                <div class="week">
                    <div>Sun</div>
                    <div>Mon</div>
                    <div>Tue</div>
                    <div>Wed</div>
                    <div>Thu</div>
                    <div>Fri</div>
                    <div>Sat</div>
                </div>
                <div class="days"></div>
                <div class="display-selected">
                    <p class="selected"></p>
                </div>
            </div>
        </div>
        
    </div>    

    <script>
        // ✅ 밤낮 조절 버튼 기능
        const switchButton = document.getElementById('switch');
        const switchImg = document.getElementById('switch-img');
        const body = document.body;

        window.onload = () => {
            body.style.backgroundImage = "url('Day.png')";
            const today = new Date();
            const todayString = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, "0")}-${String(today.getDate()).padStart(2, "0")}`;
        };


        switchButton.addEventListener('click', () => {
            const isNight = switchImg.getAttribute('src') === 'off.png';//off 이미지가 눌리면
            body.style.backgroundImage = isNight ? "url('Night.png')" : "url('Day.png')";//밤이라면 night, 아니라면 day
            switchImg.setAttribute('src', isNight ? 'on.png' : 'off.png');//밤이라면 on.png, 아니라면, off.png
        });

        // ✅ 페이지 이동 버튼 기능
        const pageLinks = {
            button1: 'https://sonny0126.github.io/Web/',
            button2: 'https://sonny0126.github.io/BitFlow/',
            button3: 'https://www.notion.so/Son-e53d58b3025f42d68700120ed5c20715',
            button4: 'https://blog.naver.com/chewypig'
        };

        Object.keys(pageLinks).forEach(id => {
            document.getElementById(id).addEventListener('click', () => {
                window.location.href = pageLinks[id]; // 버튼 클릭 시 해당 링크로 이동
            });
        });

        
        // 달력 생성 부분
        let display = document.querySelector('.display'),
            prevBtn = document.querySelector('.left'),
            nextBtn = document.querySelector('.right'),
            days = document.querySelector('.days'),
            selected = document.querySelector('.selected');

        // 자바스크립트에서 날짜 출력
        let dateToday = new Date();
        let year = dateToday.getFullYear();
        let month = dateToday.getMonth();

        function displayCalendar() {
            const firstDay = new Date(year, month, 1); // 첫날
            const firstDayIdx = firstDay.getDay(); // 요일 월=1
            const lastDay = new Date(year, month + 1, 0); // 현월의 마지막 날
            const numberOfDays = lastDay.getDate(); // 마지막 날짜

            let formattedDate = dateToday.toLocaleString('en-US', {
                year: "numeric",
                month: "long",
                timeZone: 'Asia/Seoul'
            });
            display.innerHTML = formattedDate;

            days.innerHTML = ''; // 기존 날짜 초기화

            // 빈 칸 채우기
            for (let x = 0; x < firstDayIdx; x++) {
                let div = document.createElement('div');
                div.innerHTML = ' ';
                days.appendChild(div);
            }

            // 날짜 출력
            for (let x = 1; x <= numberOfDays; x++) {
                let div = document.createElement('div');
                let currentDate = new Date(year, month, x);
                div.dataset.date = currentDate.toDateString();
                div.innerText = x;
                days.appendChild(div);

                // 오늘 날짜 확인
                if (
                    currentDate.getFullYear() === new Date().getFullYear() &&
                    currentDate.getMonth() === new Date().getMonth() &&
                    currentDate.getDate() === new Date().getDate()
                ) {
                    div.classList.add('current-date');
                }
            }

            displaySelected();
        }

        function displaySelected() {
            const daysEL = document.querySelectorAll('.days div');
            daysEL.forEach(day => {
                day.addEventListener('click', (e) => {
                    const selectedDate = e.target.dataset.date;
                    selected.innerText = `선택일: ${selectedDate}`;
                });
            });
        }

        prevBtn.addEventListener('click', () => {
            if (month === 0) {
                month = 11;
                year -= 1;
            } else {
                month -= 1;
            }
            dateToday.setMonth(month);
            displayCalendar();
        });

        nextBtn.addEventListener('click', () => {
            if (month === 11) {
                month = 0;
                year += 1;
            } else {
                month += 1;
            }
            dateToday.setMonth(month);
            displayCalendar();
        });

        displayCalendar();

    </script>
</body>
</html>
